TCP 提供一种面向连接的、可靠的字节流服务。

面向连接意味着两个使用 TCP 的应用（通常是一个客户和一个服务器）在彼此交换数据之前必须先建立一个 TCP 连接。

应用数据将被分割成 TCP 认为最合适发送的数据块。
这和 UDP 完全不同，应用程序产生的数据报长度将保持不变。
由 TCP 传递给 IP 的信息单位长度称为报文段或段（segment）。

TCP 为应用层提供全双工服务。这意味着数据能在两个方向上独立地进行传输。

Telnet、FTP 和 SMTP 都使用 TCP。

## 三次握手

1. 请求端（通常称为客户）发送一个 SYN 段指明客户打算连接的服务器的端口，以及初始序号（ISN）。这个 SYN 段为报文段 1。
2. 服务器发回包含服务器的初始序号的 SYN 报文段（报文段 2）作为应答。同时，将确认序号设置为客户的 ISN 加 1 以对客户的 SYN 报文段进行确认。一个 SYN 将占用一个序号。
3. 客户必须将确认序号设置为服务器的 ISN 加 1 以对服务器的 SYN 报文段进行确认（报文段 3）。

## 四次握手

首先进行关闭的一方（即发送第一个 FIN）将执行主动关闭，而另一方（收到这个 FIN）执行被动关闭。通常一方完成主动关闭而另一方完成被动关闭，双方都执行主动关闭也是可能的。

1. TCP 客户端发送一个 FIN，用来关闭从客户到服务器的数据传送。
2. 当服务器收到这个 FIN，它发回一个 ACK，确认序号为收到的序号加 1（报文段 5）。和 SYN 一样，一个 FIN 将占用一个序号。同时 TCP 服务器还向应用程序（即丢弃服务器）传送一个文件结束符。
3. 接着这个服务器程序就关闭它的连接，导致它的 TCP 端发送一个 FIN（报文段 6）。
4. 客户必须发回一个确认，并将确认序号设置为收到序号加 1 。

## 快速启动

TCP 快启策略使用存储在客户端的 TFO Cookie 与服务端快速建立连接。

TCP 连接的客户端向服务端发送 SYN 消息时会携带快启选项，服务端会生成一个 Cookie 并将其发送至客户端。
客户端会缓存该 Cookie，当其与服务器重新建立连接时，它会使用存储的 Cookie 直接建立 TCP 连接。
服务端验证 Cookie 后会向客户端发送 SYN 和 ACK 并开始传输数据，这也就能减少通信的次数。
